from websocketlite.handlers import ThreadWebsocketHandlerClient


class WebsocketClient(ThreadWebsocketHandlerClient):
    messages = []

    def on_open(self):
        print("websocket on_open!")
        self.write_message(
            "Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!Hello Web Socket!")

    def on_message(self, message):
        self.messages.append(message)
        if len(self.messages) >= 10000:
            print(len(self.messages))
            self.messages = []
        self.write_message(message)

    def on_close(self):
        print("websocket closet!")


ws = WebsocketClient(host="ws://localhost", port=9000)
ws.start()
